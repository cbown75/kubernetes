apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.11.1
  name: kustomizations.kustomize.toolkit.fluxcd.io
spec:
  group: kustomize.toolkit.fluxcd.io
  names:
    kind: Kustomization
    listKind: KustomizationList
    plural: kustomizations
    shortNames:
      - ks
    singular: kustomization
  scope: Namespaced
  versions:
    - additionalPrinterColumns:
        - jsonPath: .status.conditions[?(@.type=="Ready")].status
          name: Ready
          type: string
        - jsonPath: .status.conditions[?(@.type=="Ready")].message
          name: Status
          type: string
        - jsonPath: .metadata.creationTimestamp
          name: Age
          type: date
      name: v1
      schema:
        openAPIV3Schema:
          description: Kustomization is the Schema for the kustomizations API.
          properties:
            apiVersion:
              description: "APIVersion defines the versioned schema of this representation of an object."
              type: string
            kind:
              description: "Kind is a string value representing the REST resource this object represents."
              type: string
            metadata:
              type: object
            spec:
              description: KustomizationSpec defines the desired state of a kustomization.
              properties:
                dependsOn:
                  description: DependsOn may contain a meta.NamespacedObjectReference slice with references to Kustomization resources that must be ready before this Kustomization can be reconciled.
                  items:
                    description: NamespacedObjectReference contains enough information to locate the referenced Kubernetes resource object in any namespace.
                    properties:
                      name:
                        description: Name of the referent.
                        type: string
                      namespace:
                        description: Namespace of the referent, when not specified it acts as LocalObjectReference.
                        type: string
                    required:
                      - name
                    type: object
                  type: array
                force:
                  description: Force instructs the controller to recreate resources when patching fails due to an immutable field change.
                  type: boolean
                healthChecks:
                  description: HealthChecks defines a list of Kubernetes resources health checks.
                  items:
                    description: NamespacedObjectKindReference contains enough information to locate the typed Kubernetes resource object in any namespace.
                    properties:
                      apiVersion:
                        description: API version of the referent, if not specified the Kubernetes preferred version will be used.
                        type: string
                      kind:
                        description: Kind of the referent.
                        type: string
                      name:
                        description: Name of the referent.
                        type: string
                      namespace:
                        description: Namespace of the referent, when not specified it acts as LocalObjectReference.
                        type: string
                    required:
                      - kind
                      - name
                    type: object
                  type: array
                images:
                  description: Images is a list of (image name, new name, new tag or digest) for changing image names, tags or digests.
                  items:
                    description: Image contains the details of the container image to be replaced in the kustomization.
                    properties:
                      digest:
                        description: Digest is the new digest for the image.
                        type: string
                      name:
                        description: Name is the image name to match with.
                        type: string
                      newName:
                        description: NewName is the new image name.
                        type: string
                      newTag:
                        description: NewTag is the new image tag.
                        type: string
                    required:
                      - name
                    type: object
                  type: array
                interval:
                  description: Interval at which to reconcile the Kustomization.
                  pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m|h))+$
                  type: string
                kubeConfig:
                  description: KubeConfig references a Secret containing a Kubernetes client configuration file.
                  properties:
                    secretRef:
                      description: SecretRef holds the name to a secret that contains a key with the kubeconfig file as value.
                      properties:
                        key:
                          description: Key in the Secret holding the kubeconfig.
                          type: string
                        name:
                          description: Name of the Secret holding the kubeconfig.
                          type: string
                      required:
                        - name
                      type: object
                  required:
                    - secretRef
                  type: object
                patches:
                  description: Patches specifies patches to the Kubernetes resources, as read from
                  items:
                    description: Patch contains either a StrategicMerge or a JSON6902 patch to be applied to a target resource.
                    properties:
                      patch:
                        description: Patch contains the JSON6902 patch document with an array of operation objects.
                        type: string
                      target:
                        description: Target refers to the target resource to be patched.
                        properties:
                          annotationSelector:
                            description: AnnotationSelector is a string that follows the label selection expression.
                            type: string
                          group:
                            description: Group is the API group to select resources from.
                            type: string
                          kind:
                            description: Kind of the API group to select resources from.
                            type: string
                          labelSelector:
                            description: LabelSelector is a string that follows the label selection expression.
                            type: string
                          name:
                            description: Name of the target resource.
                            type: string
                          namespace:
                            description: Namespace of the target resource.
                            type: string
                          version:
                            description: Version of the API group to select resources from.
                            type: string
                        type: object
                    type: object
                  type: array
                path:
                  description: Path to the directory containing the kustomization.yaml file.
                  type: string
                patchesJson6902:
                  description: JSON 6902 patches, defined as inline YAML objects.
                  items:
                    description: JSON6902Patch contains a JSON6902 patch and the target resource to patch.
                    properties:
                      patch:
                        description: Patch contains the JSON6902 patch document with an array of operation objects.
                        items:
                          description: JSON6902 patch operation object
                          properties:
                            from:
                              description: JSONPath expression, such as 'metadata.name'.
                              type: string
                            op:
                              description: Operation to perform.
                              enum:
                                - test
                                - remove
                                - add
                                - replace
                                - move
                                - copy
                              type: string
                            path:
                              description: JSONPath expression, such as 'metadata.name'.
                              type: string
                            value:
                              description: Value to add, replace, or test.
                              x-kubernetes-preserve-unknown-fields: true
                          required:
                            - op
                            - path
                          type: object
                        type: array
                      target:
                        description: Target refers to the target resource to be patched.
                        properties:
                          annotationSelector:
                            description: AnnotationSelector is a string that follows the label selection expression.
                            type: string
                          group:
                            description: Group is the API group to select resources from.
                            type: string
                          kind:
                            description: Kind of the API group to select resources from.
                            type: string
                          labelSelector:
                            description: LabelSelector is a string that follows the label selection expression.
                            type: string
                          name:
                            description: Name of the target resource.
                            type: string
                          namespace:
                            description: Namespace of the target resource.
                            type: string
                          version:
                            description: Version of the API group to select resources from.
                            type: string
                        required:
                          - kind
                          - name
                        type: object
                    required:
                      - patch
                      - target
                    type: object
                  type: array
                patchesStrategicMerge:
                  description: Strategic merge patches, defined as inline YAML objects.
                  items:
                    x-kubernetes-preserve-unknown-fields: true
                  type: array
                postBuild:
                  description: PostBuild describes commands to run after the build is complete.
                  properties:
                    substitute:
                      additionalProperties:
                        type: string
                      description: Substitute holds a map of key/value pairs to be substituted in the manifests.
                      type: object
                    substituteFrom:
                      description: SubstituteFrom holds references to resources containing the substitution values.
                      items:
                        description: SubstituteReference contains a reference to a resource containing the substitute values.
                        properties:
                          kind:
                            description: Kind of the resource; One of 'Secret' or 'ConfigMap'.
                            enum:
                              - Secret
                              - ConfigMap
                            type: string
                          name:
                            description: Name of the resource.
                            type: string
                        required:
                          - kind
                          - name
                        type: object
                      type: array
                  type: object
                prune:
                  description: Prune enables garbage collection.
                  type: boolean
                retryInterval:
                  description: RetryInterval specifies the interval to wait before retrying a previously failed kustomization.
                  pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m|h))+$
                  type: string
                serviceAccountName:
                  description: ServiceAccountName is the name of the Kubernetes service account to impersonate when reconciling this Kustomization.
                  type: string
                sourceRef:
                  description: SourceRef refers to the source that contains the resources to be customized.
                  properties:
                    apiVersion:
                      description: API version of the referent.
                      type: string
                    kind:
                      description: Kind of the referent.
                      enum:
                        - GitRepository
                        - Bucket
                      type: string
                    name:
                      description: Name of the referent.
                      type: string
                    namespace:
                      description: Namespace of the referent, defaults to the Kustomization namespace.
                      type: string
                  required:
                    - kind
                    - name
                  type: object
                suspend:
                  description: Suspend tells the controller to suspend reconciliation of this source.
                  type: boolean
                targetNamespace:
                  description: TargetNamespace sets the namespace for resources in the kustomization without an explicit namespace reference.
                  maxLength: 63
                  type: string
                timeout:
                  description: Timeout for this kustomization.
                  pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m))+$
                  type: string
                validation:
                  description: Validation specifies the schemas for validating the kustomization intermediate manifests.
                  enum:
                    - none
                    - client
                    - server
                  type: string
                wait:
                  description: Wait instructs the controller to check the health of all the reconciled resources.
                  type: boolean
              required:
                - interval
                - prune
                - sourceRef
              type: object
            status:
              description: KustomizationStatus defines the observed state of a kustomization.
              properties:
                conditions:
                  description: Conditions holds the conditions for the Kustomization.
                  items:
                    description: "Condition contains details for one aspect of the current state of this API Resource."
                    properties:
                      lastTransitionTime:
                        description: lastTransitionTime is the last time the condition transitioned from one status to another.
                        format: date-time
                        type: string
                      message:
                        description: message is a human readable message indicating details about the transition.
                        type: string
                      observedGeneration:
                        description: observedGeneration represents the .metadata.generation that the condition was set based upon.
                        format: int64
                        type: integer
                      reason:
                        description: reason contains a programmatic identifier indicating the reason for the condition's last transition.
                        type: string
                      status:
                        description: status of the condition, one of True, False, Unknown.
                        type: string
                      type:
                        description: type of condition in CamelCase or in foo.example.com/CamelCase.
                        type: string
                    required:
                      - lastTransitionTime
                      - message
                      - reason
                      - status
                      - type
                    type: object
                  type: array
                inventory:
                  description: Inventory contains the list of Kubernetes resource object references that have been successfully applied.
                  properties:
                    entries:
                      description: Entries of Kubernetes resource object references.
                      items:
                        description: ResourceRef contains the information to locate a resource within a cluster.
                        properties:
                          id:
                            description: ID is the string representation of the Kubernetes resource object's metadata including the group, version, kind, name and namespace.
                            type: string
                          v:
                            description: Version is an internal counter incremented every time the resource has been modified.
                            type: string
                        required:
                          - id
                          - v
                        type: object
                      type: array
                  required:
                    - entries
                  type: object
                lastAppliedRevision:
                  description: LastAppliedRevision is the revision of the last successfully applied source.
                  type: string
                lastAttemptedRevision:
                  description: LastAttemptedRevision is the revision of the last reconciliation attempt.
                  type: string
                lastHandledReconcileAt:
                  description: LastHandledReconcileAt holds the value of the most recent reconcile request value.
                  type: string
                observedGeneration:
                  description: ObservedGeneration is the last reconciled generation of the Kustomization.
                  format: int64
                  type: integer
                snapshot:
                  description: Snapshot is the digest of the Kustomizations generated manifest for the current revision.
                  properties:
                    checksum:
                      description: Checksum is the SHA256 digest of the Kustomizations generated resources.
                      type: string
                    entries:
                      description: Entries of resource IDs in the Kubernetes resources.
                      items:
                        description: NamespacedObjectKindReference contains enough information to locate the referenced Kubernetes resource object in any namespace.
                        properties:
                          apiVersion:
                            description: API version of the referent, if not specified the Kubernetes preferred version will be used.
                            type: string
                          kind:
                            description: Kind of the referent.
                            type: string
                          name:
                            description: Name of the referent.
                            type: string
                          namespace:
                            description: Namespace of the referent, when not specified it acts as LocalObjectReference.
                            type: string
                        required:
                          - kind
                          - name
                        type: object
                      type: array
                  required:
                    - checksum
                  type: object
              type: object
          type: object
      served: true
      storage: true
      subresources:
        status: {}
