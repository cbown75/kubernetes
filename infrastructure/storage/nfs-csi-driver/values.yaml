nas:
  holocron:
    server: holocron.home.cwbtech.net
    shares:
      general: /volume1/kubernetes
      fast: /volume1/kubernetes-fast
      backup: /volume1/kubernetes-backup
  sith:
    server: sith.home.cwbtech.net
    shares:
      general: /volume1/kubernetes
      fast: /volume1/kubernetes-fast
      backup: /volume1/kubernetes-backup
      media: /volume1/media

storageClasses:
  defaultClass: nfs-holocron-fast

  holocron:
    enabled: true
    fast:
      enabled: true
      reclaimPolicy: Delete
      allowVolumeExpansion: true
    general:
      enabled: true
      reclaimPolicy: Retain
      allowVolumeExpansion: true
    backup:
      enabled: true
      reclaimPolicy: Retain
      allowVolumeExpansion: true

  sith:
    enabled: true
    fast:
      enabled: true
      reclaimPolicy: Delete
      allowVolumeExpansion: true
    general:
      enabled: true
      reclaimPolicy: Retain
      allowVolumeExpansion: true
    backup:
      enabled: true
      reclaimPolicy: Retain
      allowVolumeExpansion: true
    media:
      enabled: false
      reclaimPolicy: Retain
      allowVolumeExpansion: true
      accessMode: ReadWriteMany

csiDriver:
  image:
    repository: registry.k8s.io/sig-storage/nfsplugin
    tag: v4.6.0
    pullPolicy: IfNotPresent

controller:
  replicaCount: 1
  image:
    csiProvisioner:
      repository: registry.k8s.io/sig-storage/csi-provisioner
      tag: v4.0.0
    csiSnapshotter:
      repository: registry.k8s.io/sig-storage/csi-snapshotter
      tag: v6.3.3
    livenessProbe:
      repository: registry.k8s.io/sig-storage/livenessprobe
      tag: v2.12.0

  resources:
    limits:
      cpu: 500m
      memory: 1Gi
    requests:
      cpu: 10m
      memory: 128Mi

node:
  image:
    nodeDriverRegistrar:
      repository: registry.k8s.io/sig-storage/csi-node-driver-registrar
      tag: v2.10.0

  resources:
    limits:
      cpu: 500m
      memory: 1Gi
    requests:
      cpu: 10m
      memory: 512Mi

# Optimized mount options for 50Gb Synology NAS with NFSv4.1
mountOptions:
  fast:
    - nfsvers=4.1
    - hard
    - rsize=1048576 # 1MB read blocks for high-bandwidth connections
    - wsize=1048576 # 1MB write blocks for high-bandwidth connections
    - fsc # Enable local caching for frequently accessed files
    - intr # Allow interruption of NFS calls
    - timeo=600 # 60 second timeout
  general:
    - nfsvers=4.1
    - hard
    - rsize=1048576 # 1MB read blocks for high-bandwidth connections
    - wsize=1048576 # 1MB write blocks for high-bandwidth connections
    - intr # Allow interruption of NFS calls
    - timeo=600 # 60 second timeout
  backup:
    - nfsvers=4.1
    - hard
    - rsize=65536 # 64KB blocks for sequential backup access
    - wsize=65536 # 64KB blocks for sequential backup access
    - intr # Allow interruption of NFS calls
    - timeo=600 # 60 second timeout
  media:
    - nfsvers=4.1
    - hard
    - rsize=1048576 # 1MB read blocks for media streaming
    - wsize=1048576 # 1MB write blocks for media streaming
    - intr # Allow interruption of NFS calls
    - timeo=600 # 60 second timeout

securityContext:
  runAsNonRoot: true
  runAsUser: 65532
  fsGroup: 65532
  seccompProfile:
    type: RuntimeDefault

tolerations:
  - key: "node-role.kubernetes.io/master"
    operator: "Exists"
    effect: "NoSchedule"
  - key: "node-role.kubernetes.io/controlplane"
    operator: "Exists"
    effect: "NoSchedule"
  - key: "node-role.kubernetes.io/control-plane"
    operator: "Exists"
    effect: "NoSchedule"
