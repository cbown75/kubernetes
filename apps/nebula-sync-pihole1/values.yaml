# Nebula Sync PiHole1 - Complete Values Configuration
# This file provides all required values for the nebula-sync-pihole1 Helm chart
# Basic chart configuration
nameOverride: ""
fullnameOverride: ""
replicaCount: 1
# Container image configuration
image:
  registry: ""
  repository: ghcr.io/lovelaze/nebula-sync
  tag: "latest"
  pullPolicy: IfNotPresent
imagePullSecrets: []
# Service Account configuration
serviceAccount:
  create: true
  automount: true
  annotations: {}
  name: ""
# RBAC configuration (REQUIRED - this was missing!)
rbac:
  create: false # Set to false since nebula-sync doesn't need special RBAC permissions
  rules: [] # Empty rules since we're not creating RBAC
# Pod annotations and labels
podAnnotations: {}
podLabels: {}
# Security Context configuration
podSecurityContext:
  runAsNonRoot: true
  runAsUser: 65534
  runAsGroup: 65534
  fsGroup: 65534
  seccompProfile:
    type: RuntimeDefault
securityContext:
  allowPrivilegeEscalation: false
  readOnlyRootFilesystem: true
  capabilities:
    drop:
      - ALL
# Service configuration (disabled for background jobs)
service:
  enabled: false
# Network Policy configuration
networkPolicy:
  enabled: true
  egress:
    - ports:
        - port: 53
          protocol: UDP
        - port: 53
          protocol: TCP
      to: []
    - ports:
        - port: 80
          protocol: TCP
        - port: 443
          protocol: TCP
      to: []
# Resource limits and requests
resources:
  limits:
    cpu: "200m"
    memory: "256Mi"
  requests:
    cpu: "100m"
    memory: "128Mi"
# Node selection and scheduling
nodeSelector: {}
tolerations: []
affinity: {}
# Sealed Secrets configuration
sealedSecrets:
  enabled: true
  # These values are set by the HelmRelease in release.yaml
  primaryPassword: ""
  replicaPasswords: []
  additionalSecrets: {}
# Primary PiHole configuration
primary:
  url: "" # Set by HelmRelease
  password: "" # This will be injected from secrets
# Replica PiHoles configuration  
replicas:
  urls: [] # Set by HelmRelease
# Sync configuration
sync:
  full: false
  gravity: true
  cron: "*/5 * * * *"
  config:
    dns: true
    dhcp: true
    ntp: true
    resolver: true
    database: true
    misc: false
    debug: false
  gravity_options:
    dhcp_leases: true
    group: true
    ad_list: true
    ad_list_by_group: true
    domain_list: true
    domain_list_by_group: true
    client: true
    client_by_group: true
# Environment variables (if needed)
env: []
# Webhook configuration (optional)
webhooks: {}
#  success:
#    url: ""
#    body: ""
#    headers: ""
#  failure:
#    url: ""
#    body: ""
#    headers: ""

# Volume configuration
volumes:
  - name: tmp
    emptyDir: {}
volumeMounts:
  - name: tmp
    mountPath: /tmp
# Persistence (disabled for stateless sync jobs)
persistence:
  enabled: false
# Service Monitor for Prometheus (optional)
serviceMonitor:
  enabled: false
