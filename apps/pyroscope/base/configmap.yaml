apiVersion: v1
kind: ConfigMap
metadata:
  name: pyroscope-config
  namespace: monitoring
  labels:
    app.kubernetes.io/name: pyroscope
    app.kubernetes.io/part-of: monitoring-stack
data:
  config.yaml: |
    server:
      http_listen_port: 4040
      log_level: info

    # Storage configuration
    storage:
      backend: filesystem
      filesystem_storage_backend:
        dir: /data

    # Retention settings
    limits:
      max_query_lookback: 720h  # 30 days
      max_query_length: 24h

    # Memberlist for clustering (single instance for now)
    memberlist:
      join_members: []

    # Observability
    analytics:
      reporting_enabled: false
