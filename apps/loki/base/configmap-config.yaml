apiVersion: v1
kind: ConfigMap
metadata:
  name: loki-config
  namespace: monitoring
data:
  config.yaml: "auth_enabled: false\n\nserver:\n  http_listen_port: 3100\n  grpc_listen_port: 9095\n  http_server_read_timeout: 120s\n  http_server_write_timeout: 120s\n  http_server_idle_timeout: 120s\n  grpc_server_max_recv_msg_size: 104857600\n  grpc_server_max_send_msg_size: 104857600\n\ncommon:\n  instance_addr: 0.0.0.0\n  path_prefix: /var/loki\n  replication_factor: 1\n  ring:\n    kvstore:\n      store: inmemory\n\nmemberlist:\n  join_members:\n    - loki-memberlist\n\nschema_config:\n  configs:\n    - from: \"2024-04-01\"\n      store: tsdb\n      object_store: filesystem\n      schema: v13\n      index:\n        prefix: loki_index_\n        period: 24h\n\nstorage_config:\n  tsdb_shipper:\n    active_index_directory: /var/loki/tsdb-index\n    cache_location: /var/loki/tsdb-cache\n  filesystem:\n    directory: /var/loki/chunks\n\npattern_ingester:\n  enabled: false\n\nlimits_config:\n  retention_period: 168h\n  reject_old_samples: true\n  reject_old_samples_max_age: 168h\n  max_entries_limit_per_query: 5000\n  max_query_series: 500\n  max_query_parallelism: 32\n  split_queries_by_interval: 15m\n  max_cache_freshness_per_query: 10m\n\nchunk_store_config:\n  chunk_cache_config:\n    memcached:\n      batch_size: 256\n      parallelism: 10\n    memcached_client:\n      host: loki-chunks-cache\n      service: memcached-client\n\nquery_range:\n  align_queries_with_step: true\n  cache_results: true\n  results_cache:\n    cache:\n      memcached_client:\n        host: loki-results-cache\n        service: memcached-client\n\nfrontend:\n  encoding: protobuf\n  \nquery_scheduler:\n  max_outstanding_requests_per_tenant: 32768\n\nquerier:\n  max_concurrent: 4\n\ningester:\n  chunk_idle_period: 30m\n  chunk_block_size: 262144\n  chunk_encoding: snappy\n  chunk_retain_period: 1m\n  max_chunk_age: 2h\n  wal:\n    enabled: true\n    dir: /var/loki/wal\n\ncompactor:\n  working_directory: /var/loki/compactor\n  compaction_interval: 10m\n  retention_enabled: true\n  retention_delete_delay: 2h\n  retention_delete_worker_count: 150\n  delete_request_store: filesystem\n"
